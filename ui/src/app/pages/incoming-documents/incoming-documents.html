<div class="card">
    <div class="font-semibold text-xl mb-4">Incoming documents</div>
    @if (data) {
    <p-table [value]="data.content">
        <ng-template #caption>
            <div class="flex gap-4">
                <span class="grow flex">
                    <input class="grow" pInputText [(ngModel)]="query" placeholder="Поиск" (ngModelChange)="loadIncomingDocuments()">
                </span>
                <span>
                    <p-button icon="pi pi-plus" (onClick)="edit()" label="Добавить"></p-button>
                </span>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th>#</th>
                <th>Дата документа</th>
                <th>Номер документа</th>
                <th>Контрагент</th>
                <th>Договор</th>
                <th>Склад</th>
                <th>Статус</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template #body let-incomingDoc>
            <tr>
                <td>{{incomingDoc.id}}</td>
                <td>{{incomingDoc.documentDate}}</td>
                <td>{{incomingDoc.documentNumber}}</td>
                <td>{{incomingDoc.contractor.title}}</td>
                <td>{{incomingDoc.contract.title}}</td>
                <td>{{incomingDoc.warehouse.title}}</td>
                <td>
                    <p-checkbox [binary]="true" [(ngModel)]="incomingDoc.enabled" [readonly]="true"></p-checkbox>
                </td>

                <td>
                    <p-button icon="pi pi-pencil" (onClick)="edit(incomingDoc.id)"></p-button>
                    <p-button icon="pi pi-check" (onClick)="switch(incomingDoc.id)" [hidden]="incomingDoc.enabled"
                              pTooltip="Провести"></p-button>
                    <p-button icon="pi pi-undo" (onClick)="switch(incomingDoc.id)" [hidden]="!incomingDoc.enabled"
                              pTooltip="Отменить проводку"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    }

</div>
